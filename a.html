<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Åã„Çè„ÅÑ„ÅÑÈ≥•„ÅÆÂ∞ÑÂá∫„Ç≤„Éº„É†</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #87CEEB 0%, #98D8E8 100%);
            font-family: 'Arial', sans-serif;
        }
        
        .game-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        canvas {
            border: 3px solid #34495e;
            border-radius: 10px;
            background: linear-gradient(to bottom, #87CEEB 0%, #90EE90 100%);
            cursor: crosshair;
        }
        
        .controls {
            margin-top: 15px;
            color: #2c3e50;
            font-size: 14px;
        }
        
        .score {
            font-size: 18px;
            font-weight: bold;
            color: #e74c3c;
            margin-top: 10px;
        }
        
        .restart-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            transition: background 0.3s;
        }
        
        .restart-btn:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üê¶ „Åã„Çè„ÅÑ„ÅÑÈ≥•„ÅÆÂ∞ÑÂá∫„Ç≤„Éº„É† üê¶</h1>
        <canvas id="gameCanvas" width="800" height="500"></canvas>
        <div class="controls">
            „Éû„Ç¶„Çπ„Åß„Éâ„É©„ÉÉ„Ç∞„Åó„Å¶È≥•„ÇíÁô∫Â∞ÑÔºÅÈ£õË∑ùÈõ¢„ÇíÁ´∂„Åä„ÅÜÔºÅ
        </div>
        <div class="score" id="scoreDisplay">È£õË∑ùÈõ¢: 0m</div>
        <button class="restart-btn" onclick="resetGame()">„É™„Çπ„Çø„Éº„Éà</button>
    </div>

    <script>
        // „Ç≤„Éº„É†Â§âÊï∞„ÅÆÂàùÊúüÂåñ
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('scoreDisplay');
        
        let bird = null;
        let isDragging = false;
        let startX = 100;
        let startY = 400;
        let dragX = 0;
        let dragY = 0;
        let isFlying = false;
        let maxDistance = 0;
        let gameRunning = false;
        
        // Áâ©ÁêÜÂÆöÊï∞
        const gravity = 0.3;
        const friction = 0.99;
        const groundY = canvas.height - 50;
        
        // È≥•„ÇØ„É©„Çπ
        class Bird {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.vx = 0;
                this.vy = 0;
                this.size = 20;
                this.color = '#FFD700';
                this.trail = [];
                this.onGround = false;
            }
            
            update() {
                if (isFlying && !this.onGround) {
                    // ÈáçÂäõ„ÇíÈÅ©Áî®
                    this.vy += gravity;
                    
                    // Á©∫Ê∞óÊäµÊäó„ÇíÈÅ©Áî®
                    this.vx *= friction;
                    this.vy *= friction;
                    
                    // ‰ΩçÁΩÆ„ÇíÊõ¥Êñ∞
                    this.x += this.vx;
                    this.y += this.vy;
                    
                    // ËªåË∑°„ÇíË®òÈå≤
                    this.trail.push({x: this.x, y: this.y});
                    if (this.trail.length > 30) {
                        this.trail.shift();
                    }
                    
                    // Âú∞Èù¢„Å®„ÅÆË°ùÁ™ÅÂà§ÂÆö
                    if (this.y >= groundY - this.size) {
                        this.y = groundY - this.size;
                        this.vy = 0;
                        this.vx *= 0.7; // Âú∞Èù¢„Åß„ÅÆÊë©Êì¶
                        this.onGround = true;
                        
                        // È£õË∑ùÈõ¢„ÇíË®àÁÆó
                        const distance = Math.max(0, Math.floor((this.x - startX) / 10));
                        maxDistance = Math.max(maxDistance, distance);
                        scoreDisplay.textContent = `È£õË∑ùÈõ¢: ${distance}m (ÊúÄÈ´òË®òÈå≤: ${maxDistance}m)`;
                    }
                    
                    // ÁîªÈù¢Â§ñ„ÉÅ„Çß„ÉÉ„ÇØ
                    if (this.x > canvas.width + 100) {
                        this.reset();
                    }
                }
            }
            
            draw() {
                // ËªåË∑°„ÇíÊèèÁîª
                if (this.trail.length > 1) {
                    ctx.strokeStyle = 'rgba(255, 215, 0, 0.3)';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.moveTo(this.trail[0].x, this.trail[0].y);
                    for (let i = 1; i < this.trail.length; i++) {
                        ctx.lineTo(this.trail[i].x, this.trail[i].y);
                    }
                    ctx.stroke();
                }
                
                // È≥•„ÅÆÊú¨‰Ωì„ÇíÊèèÁîª
                ctx.save();
                ctx.translate(this.x, this.y);
                
                // È£õË°å‰∏≠„ÅØËßíÂ∫¶„ÇíË™øÊï¥
                if (isFlying && !this.onGround) {
                    const angle = Math.atan2(this.vy, this.vx);
                    ctx.rotate(angle);
                }
                
                // È≥•„ÅÆÂΩ¢„ÇíÊèèÁîª
                this.drawBird();
                ctx.restore();
            }
            
            drawBird() {
                // ‰Ωì
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.ellipse(0, 0, this.size, this.size * 0.8, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // „Åè„Å°„Å∞„Åó
                ctx.fillStyle = '#FF6B35';
                ctx.beginPath();
                ctx.moveTo(this.size, 0);
                ctx.lineTo(this.size + 8, -3);
                ctx.lineTo(this.size + 8, 3);
                ctx.closePath();
                ctx.fill();
                
                // ÁõÆ
                ctx.fillStyle = 'white';
                ctx.beginPath();
                ctx.ellipse(5, -5, 4, 4, 0, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.ellipse(6, -5, 2, 2, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Áøº
                ctx.fillStyle = '#FFB347';
                ctx.beginPath();
                ctx.ellipse(-8, 0, 12, 8, 0, 0, Math.PI * 2);
                ctx.fill();
                
                // Â∞ªÂ∞æ
                ctx.fillStyle = '#FF6B35';
                ctx.beginPath();
                ctx.moveTo(-this.size, 0);
                ctx.lineTo(-this.size - 10, -8);
                ctx.lineTo(-this.size - 10, 8);
                ctx.closePath();
                ctx.fill();
            }
            
            launch(power, angle) {
                this.vx = Math.cos(angle) * power;
                this.vy = Math.sin(angle) * power;
                isFlying = true;
                this.onGround = false;
                this.trail = [];
            }
            
            reset() {
                this.x = startX;
                this.y = startY;
                this.vx = 0;
                this.vy = 0;
                this.trail = [];
                this.onGround = false;
                isFlying = false;
                gameRunning = false;
            }
        }
        
        // ËÉåÊôØ„ÇíÊèèÁîª
        function drawBackground() {
            // Á©∫„ÅÆ„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87CEEB');
            gradient.addColorStop(1, '#90EE90');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Èõ≤„ÇíÊèèÁîª
            drawClouds();
            
            // Âú∞Èù¢„ÇíÊèèÁîª
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, groundY, canvas.width, canvas.height - groundY);
            
            // Ëçâ„ÇíÊèèÁîª
            ctx.fillStyle = '#228B22';
            ctx.fillRect(0, groundY, canvas.width, 10);
        }
        
        function drawClouds() {
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            
            // Èõ≤1
            drawCloud(150, 80, 40);
            drawCloud(400, 60, 35);
            drawCloud(650, 90, 45);
        }
        
        function drawCloud(x, y, size) {
            ctx.beginPath();
            ctx.ellipse(x, y, size, size * 0.6, 0, 0, Math.PI * 2);
            ctx.ellipse(x + size * 0.5, y, size * 0.8, size * 0.5, 0, 0, Math.PI * 2);
            ctx.ellipse(x - size * 0.5, y, size * 0.8, size * 0.5, 0, 0, Math.PI * 2);
            ctx.ellipse(x, y - size * 0.3, size * 0.7, size * 0.4, 0, 0, Math.PI * 2);
            ctx.fill();
        }
        
        // Áô∫Â∞ÑËªåÈÅì„ÇíÊèèÁîª
        function drawTrajectory() {
            if (isDragging && !isFlying) {
                const power = Math.min(Math.sqrt(dragX * dragX + dragY * dragY) / 10, 15);
                const angle = Math.atan2(dragY, dragX);
                
                ctx.strokeStyle = 'rgba(255, 0, 0, 0.5)';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(bird.x, bird.y);
                
                // ‰∫àÊ∏¨ËªåÈÅì„ÇíÊèèÁîª
                let x = bird.x;
                let y = bird.y;
                let vx = Math.cos(angle) * power;
                let vy = Math.sin(angle) * power;
                
                for (let i = 0; i < 50; i++) {
                    vy += gravity;
                    vx *= friction;
                    vy *= friction;
                    x += vx;
                    y += vy;
                    
                    if (y >= groundY - bird.size) break;
                    
                    if (i % 3 === 0) {
                        ctx.lineTo(x, y);
                    }
                }
                
                ctx.stroke();
                ctx.setLineDash([]);
            }
        }
        
        // „Ç≤„Éº„É†„É´„Éº„Éó
        function gameLoop() {
            // ËÉåÊôØ„Çí„ÇØ„É™„Ç¢
            drawBackground();
            
            // È≥•„ÇíÊõ¥Êñ∞„ÉªÊèèÁîª
            if (bird) {
                bird.update();
                bird.draw();
            }
            
            // Áô∫Â∞ÑËªåÈÅì„ÇíÊèèÁîª
            drawTrajectory();
            
            // Áô∫Â∞ÑÂè∞„ÇíÊèèÁîª
            drawLauncher();
            
            requestAnimationFrame(gameLoop);
        }
        
        function drawLauncher() {
            // Áô∫Â∞ÑÂè∞
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(startX - 30, groundY - 20, 60, 20);
            
            // Áô∫Â∞ÑÂè∞„ÅÆË£ÖÈ£æ
            ctx.fillStyle = '#654321';
            ctx.fillRect(startX - 25, groundY - 15, 50, 10);
        }
        
        // „Éû„Ç¶„Çπ„Ç§„Éô„É≥„Éà
        canvas.addEventListener('mousedown', (e) => {
            if (!isFlying) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                // È≥•„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Åü„Åã„ÉÅ„Çß„ÉÉ„ÇØ
                const distance = Math.sqrt((mouseX - bird.x) ** 2 + (mouseY - bird.y) ** 2);
                if (distance < bird.size + 10) {
                    isDragging = true;
                    dragX = mouseX - bird.x;
                    dragY = mouseY - bird.y;
                }
            }
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (isDragging && !isFlying) {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                dragX = mouseX - bird.x;
                dragY = mouseY - bird.y;
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            if (isDragging && !isFlying) {
                const power = Math.min(Math.sqrt(dragX * dragX + dragY * dragY) / 10, 15);
                const angle = Math.atan2(dragY, dragX);
                
                bird.launch(power, angle);
                isDragging = false;
                gameRunning = true;
                
                // Ëá™Âãï„É™„Çª„ÉÉ„ÉàÔºà3ÁßíÂæåÔºâ
                setTimeout(() => {
                    if (bird.onGround) {
                        bird.reset();
                    }
                }, 3000);
            }
        });
        
        // „Ç≤„Éº„É†„É™„Çª„ÉÉ„Éà
        function resetGame() {
            if (bird) {
                bird.reset();
            }
            isDragging = false;
            scoreDisplay.textContent = `È£õË∑ùÈõ¢: 0m (ÊúÄÈ´òË®òÈå≤: ${maxDistance}m)`;
        }
        
        // „Ç≤„Éº„É†ÂàùÊúüÂåñ
        function initGame() {
            bird = new Bird(startX, startY);
            scoreDisplay.textContent = `È£õË∑ùÈõ¢: 0m`;
            gameLoop();
        }
        
        // „Ç≤„Éº„É†ÈñãÂßã
        initGame();
    </script>
</body>
</html>